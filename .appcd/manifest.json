{
    "version": "0.0.1",
    "graph": {
        "dogeapi": [
            "dogeapi-presign"
        ],
        "dogeapi-presign": []
    },
    "components": {
        "dogeapi": {
            "image_registry": "ghcr.io/appcd-dev/dogeapi/dogeapi",
            "image_tag": "latest",
            "server_port": 8000,
            "ports": [
                {
                    "listen": 8000
                }
            ],
            "http_egress": [
                {
                    "endpoint": "${PRESIGN_SERVICE_URL}/presign",
                    "operations": [
                        "GET"
                    ]
                }
            ],
            "http_ingress": [
                {
                    "endpoint": "/login",
                    "operations": [
                        "POST"
                    ]
                },
                {
                    "endpoint": "/blog",
                    "operations": [
                        "GET",
                        "POST"
                    ]
                },
                {
                    "endpoint": "/blog/{id}",
                    "operations": [
                        "GET",
                        "PUT",
                        "DELETE"
                    ]
                },
                {
                    "endpoint": "/users",
                    "operations": [
                        "GET",
                        "POST"
                    ]
                },
                {
                    "endpoint": "/users/{id}",
                    "operations": [
                        "GET"
                    ]
                },
                {
                    "endpoint": "/",
                    "operations": [
                        "GET"
                    ]
                }
            ],
            "dependencies": {
                "s3": [
                    {
                        "bucket": "${S3_BUCKET_NAME}",
                        "methods": [
                            "GetObject",
                            "PutObject"
                        ]
                    }
                ],
                "database": [
                    {
                        "methods:": [
                            "READ",
                            "WRITE"
                        ],
                        "dsn": "${CONNECTION_STRING}",
                        "db_engine": "postgres"
                    }
                ],
                "env": [
                    {
                        "name": "DEVELOPER_FLAG_1"
                    },
                    {
                        "name": "DEBUG"
                    }
                ]
            }
        },
        "dogeapi-presign": {
            "image_registry": "ghcr.io/appcd-dev/dogeapi-presign/presign",
            "image_tag": "latest",
            "server_port": 5000,
            "ports": [
                {
                    "listen": 5000
                }
            ],
            "http_ingress": [
                {
                    "endpoint": "/presign/{s3_key}",
                    "operations": [
                        "GET"
                    ]
                }
            ],
            "dependencies": {
                "s3": {
                    "bucket": "${S3_BUCKET}",
                    "methods": [
                        "GetObject"
                    ]
                }
            }
        }
    }
}
